CAST(CASE WHEN   ISNULL((SELECT SUM (TabPrikazMzdyAZmetky.Sk_cas_Obsluhy_H) FROM TabPrikazMzdyAZmetky WITH(NOLOCK)   INNER JOIN TabPrPostup WITH(NOLOCK)  ON  TabPrikazMzdyAZmetky.IDPrikaz=TabPrPostup.IDPrikaz AND TabPrikazMzdyAZmetky.DokladPrPostup=TabPrPostup.Doklad AND TabPrikazMzdyAZmetky.AltPrPostup=TabPrPostup.Alt AND TabPrPostup.IDOdchylkyDo IS NULL   WHERE #TabPorPS.IDPrikaz = TabPrikazMzdyAZmetky.IDPrikaz AND TabPrPostup.nazev NOT LIKE N'VF1%' AND TabPrPostup.nazev NOT LIKE N'VF5%' AND TabPrPostup.nazev NOT LIKE N'VF7%'),0) <> 0  THEN  (SELECT SUM (TabPrKVazby.Mnoz_skut_realizovane) FROM TabPrkVazby WITH(NOLOCK)   WHERE TabPrKVazby.IDPrikaz=#TabPorPS.IDPrikaz AND TabPrKVazby.IDOdchylkyDo IS NULL)  /  (SELECT SUM (TabPrikazMzdyAZmetky.Sk_cas_Obsluhy_H) FROM TabPrikazMzdyAZmetky WITH(NOLOCK)   INNER JOIN TabPrPostup WITH(NOLOCK)  ON  TabPrikazMzdyAZmetky.IDPrikaz=TabPrPostup.IDPrikaz AND TabPrikazMzdyAZmetky.DokladPrPostup=TabPrPostup.Doklad AND TabPrikazMzdyAZmetky.AltPrPostup=TabPrPostup.Alt AND TabPrPostup.IDOdchylkyDo IS NULL   WHERE #TabPorPS.IDPrikaz = TabPrikazMzdyAZmetky.IDPrikaz AND TabPrPostup.nazev NOT LIKE N'VF1%' AND TabPrPostup.nazev NOT LIKE N'VF5%' AND TabPrPostup.nazev NOT LIKE N'VF7%')  ELSE NULL END AS NUMERIC (19,6))
