(DATEPART(WEEK,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))-CASE DATEPART(YEAR,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))    WHEN 2005   THEN CASE DATEPART(WEEK,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))               WHEN 1               THEN -52 ELSE 1 END ELSE CASE DATEPART(YEAR,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))                         WHEN 2006                        THEN CASE DATEPART(WEEK,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))                                   WHEN 1                                    THEN -51                                    ELSE 1 END                          ELSE CASE WHEN DATEPART(YEAR,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID)) IN (2007,2008)                                            THEN CASE DATEPART(WEEK,(Select J._dat_dod from TabPohybyZbozi_EXT J WITH(NOLOCK) where J.ID=TabPohybyZbozi.ID))                                                   WHEN 53                                                    THEN 52                                                    ELSE 0 END                                             ELSE 0 END                         END     END) 
