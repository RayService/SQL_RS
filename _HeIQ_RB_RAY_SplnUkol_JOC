CAST(CASE   WHEN (SELECT U.DatumDokonceni FROM TabUkoly U WITH(NOLOCK) WHERE U.ID=TabUkoly.ID) IS NOT NULL THEN 65408   WHEN (SELECT U.DatumDokonceni FROM TabUkoly U WITH(NOLOCK) WHERE U.ID=TabUkoly.ID) IS NULL AND (SELECT U.TerminSplneni FROM TabUkoly U WITH(NOLOCK) WHERE U.ID=TabUkoly.ID) BETWEEN GetDate() AND GetDate()+7   THEN 500984  WHEN (SELECT U.DatumDokonceni FROM TabUkoly U WITH(NOLOCK) WHERE U.ID=TabUkoly.ID) IS NULL AND  (SELECT U.TerminSplneni FROM TabUkoly U WITH(NOLOCK) WHERE U.ID=TabUkoly.ID) < GetDATE() THEN 1  ELSE   NULL  END AS INT)
