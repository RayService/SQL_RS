  (  SELECT  CASE  WHEN  (SELECT TP.mnozstvi * AVG(PZ.JCBezDaniKC)  FROM TabPlan TP WITH(NOLOCK)  INNER JOIN TabPlanZdrojOZ TPZ ON TPZ.IDPlan = TP.ID  JOIN TabPohybyZbozi PZ WITH(NOLOCK) ON TPZ.IDRezervace = PZ.ID  JOIN TabDokladyZbozi TD WITH(NOLOCK) ON TD.ID = PZ.IDDoklad  WHERE TP.ID = TabPlan.ID  GROUP BY TP.ID, TP.mnozstvi) IS NULL  THEN  CASE WHEN (SELECT tkz.SkupZbo  FROM TabPlan tpl  LEFT OUTER JOIN TabKmenZbozi tkz ON tkz.ID=tpl.IDTabKmen  WHERE tpl.ID = TabPlan.ID)='830'  THEN  (SELECT  SUM(tppp.Kusy_zad * tppp.TAC_S / 3600.0)*7748/*zde pro SK 830*/  FROM TabPlan tp WITH(NOLOCK)    LEFT OUTER JOIN TabPlanPrikaz tpp WITH(NOLOCK) ON tpp.IDPlan = tp.ID    LEFT OUTER JOIN TabPlanPrPostup tppp WITH(NOLOCK) ON tppp.IDPlanPrikaz = tpp.ID    LEFT OUTER JOIN TabCPraco tcp WITH(NOLOCK) ON tppp.Pracoviste=tcp.ID  WHERE (tcp.IDTabStrom = '200' OR tcp.IDTabStrom LIKE N'2002%') AND tp.ID = TabPlan.ID)  ELSE  (SELECT  SUM(tppp.Kusy_zad * tppp.TAC_S / 3600.0)*2006/*zde pro SK ostatn√≠*/  FROM TabPlan tp WITH(NOLOCK)    LEFT OUTER JOIN TabPlanPrikaz tpp WITH(NOLOCK) ON tpp.IDPlan = tp.ID    LEFT OUTER JOIN TabPlanPrPostup tppp WITH(NOLOCK) ON tppp.IDPlanPrikaz = tpp.ID    LEFT OUTER JOIN TabCPraco tcp WITH(NOLOCK) ON tppp.Pracoviste=tcp.ID  WHERE (tcp.IDTabStrom = '200' OR tcp.IDTabStrom LIKE N'2002%') AND tp.ID = TabPlan.ID) END  ELSE  (SELECT TP.mnozstvi * AVG(PZ.JCBezDaniKC)  FROM TabPlan TP WITH(NOLOCK)  INNER JOIN TabPlanZdrojOZ TPZ ON TPZ.IDPlan = TP.ID  JOIN TabPohybyZbozi PZ WITH(NOLOCK) ON TPZ.IDRezervace = PZ.ID  JOIN TabDokladyZbozi TD WITH(NOLOCK) ON TD.ID = PZ.IDDoklad  WHERE TP.ID = TabPlan.ID  GROUP BY TP.ID, TP.mnozstvi)  END  )
