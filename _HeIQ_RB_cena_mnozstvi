CAST ((SELECT CASE WHEN kalce.Cena1=0 THEN 16744703  WHEN kalce.Cena1>200 THEN 16744703  WHEN tss.Mnozstvi=0 THEN 16744703  END  FROM TabKvazby kv WITH(NOLOCK)    LEFT OUTER JOIN TabKmenZbozi tkz WITH(NOLOCK) ON kv.nizsi=tkz.ID    LEFT OUTER JOIN TabParametryKmeneZbozi prkm WITH(NOLOCK) ON prkm.IDKmenZbozi=tkz.ID    LEFT OUTER JOIN TabKalkCe kalce WITH(NOLOCK) ON kalce.IDKmenZbozi=kv.nizsi AND EXISTS(SELECT * FROM TabCZmeny Zod WITH(NOLOCK) LEFT OUTER JOIN TabCZmeny Zdo WITH(NOLOCK) ON (ZDo.ID=kalce.zmenaDo) WHERE Zod.ID=kalce.zmenaOd AND Zod.platnostTPV=1 AND Zod.datum<=/*:__DATUMTPV*/GETDATE() AND (kalce.ZmenaDo IS NULL OR Zdo.platnostTPV=0 OR (ZDo.platnostTPV=1 AND ZDo.datum>/*:__DATUMTPV*/GETDATE())))    LEFT OUTER JOIN TabStavSkladu tss WITH(NOLOCK) ON kv.nizsi = tss.IDKmenZbozi AND tss.IDSklad=prkm.VychoziSklad  WHERE kv.ID=TabKvazby.ID)  AS INT)
