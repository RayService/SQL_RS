(  SELECT COUNT(*)  FROM TabCisZam WITH(NOLOCK)  INNER JOIN TabObsazeniPracovnichPozic WITH(NOLOCK) ON TabCisZam.ID=TabObsazeniPracovnichPozic.IDZam  WHERE TabObsazeniPracovnichPozic.IDPP=TabPracovniPozice.ID AND (ISNULL ((SELECT TabZamMzd.StavES  FROM TabZamMzd WITH(NOLOCK)  WHERE TabZamMzd.IdObdobi=:__IDMZDOBD  AND TabZamMzd.ZamestnanecId=TabCisZam.ID), 10  ) IN (0/*,1,10*/)) AND (DATEADD(d, 0, DATEDIFF(d, 0, GETDATE())) BETWEEN TabObsazeniPracovnichPozic.PlatnostOd AND TabObsazeniPracovnichPozic.PlatnostDO  OR (DATEADD(d, 0, DATEDIFF(d, 0, GETDATE())) >= TabObsazeniPracovnichPozic.PlatnostOD AND TabObsazeniPracovnichPozic.PlatnostDO IS NULL))  )
