(  SELECT            cast(( SELECT Profese + ','               FROM               (SELECT    distinct    cast(tvp.Profese as nvarchar(30)) as Profese, TabPrikazMzdyAZmetky.ID  FROM            TabVyrProfese AS tvp WITH(NOLOCK)                         INNER JOIN TabPrPostupVyrProfese AS tppvp WITH(NOLOCK) ON tvp.ID = tppvp.IDVyrProfese                         INNER JOIN TabPrPostup AS tpp WITH(NOLOCK) ON tppvp.IDPostup = tpp.ID                         INNER JOIN TabPrikazMzdyAZmetky AS tpmaz WITH(NOLOCK) ON tpp.IDPrikaz = tpmaz.IDPrikaz AND tpp.Doklad = tpmaz.DokladPrPostup                                                                                                                   WHERE (tpmaz.ID = TabPrikazMzdyAZmetky.ID AND tpmaz.TypMzdy<>2 AND tpp.IDOdchylkyDo IS NULL)         ) t2              WHERE t2.ID = t1.ID              ORDER BY Profese                FOR XML PATH('') )  as nvarchar(255))AS Profese          FROM (SELECT   distinct    cast(tvp.Profese as nvarchar(20)) as Profese, TabPrikazMzdyAZmetky.ID  FROM            TabVyrProfese AS tvp WITH(NOLOCK)                         INNER JOIN TabPrPostupVyrProfese AS tppvp WITH(NOLOCK) ON tvp.ID = tppvp.IDVyrProfese                         INNER JOIN TabPrPostup AS tpp WITH(NOLOCK) ON tppvp.IDPostup = tpp.ID                         INNER JOIN TabPrikazMzdyAZmetky AS tpmaz WITH(NOLOCK) ON tpp.IDPrikaz = tpmaz.IDPrikaz AND tpp.Doklad = tpmaz.DokladPrPostup                                                                                                                   WHERE (tpmaz.ID = TabPrikazMzdyAZmetky.ID AND tpmaz.TypMzdy<>2 AND tpp.IDOdchylkyDo IS NULL)         ) t1          GROUP BY ID   )
