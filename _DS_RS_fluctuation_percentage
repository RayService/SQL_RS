(  SELECT COUNT(tczA.ID)*100/CAST((SELECT ISNULL(NULLIF(COUNT(tczB.ID),0),1)  FROM TabPersVyberRizeni tpvrB WITH(NOLOCK)  LEFT OUTER JOIN TabPersVyberRizeniZamestnanec tpvrz WITH(NOLOCK) ON tpvrz.VyberRizeniId = tpvrB.ID   LEFT OUTER JOIN TabCisZam tczB WITH(NOLOCK) ON tczB.ID = tpvrz.ZamestnanecID  WHERE tpvrB.ID = TabPersVyberRizeni.ID) AS numeric)  FROM TabPersVyberRizeni tpvrA WITH(NOLOCK)  LEFT OUTER JOIN TabPersVyberRizeniZamestnanec tpvrz WITH(NOLOCK) ON tpvrz.VyberRizeniId = tpvrA.ID   LEFT OUTER JOIN TabCisZam tczA WITH(NOLOCK) ON tczA.ID = tpvrz.ZamestnanecID AND tczA.ID IN (SELECT TabZamMzd.ZamestnanecId  FROM TabZamMzd WITH(NOLOCK)  WHERE  (TabZamMzd.IdObdobi=(SELECT tabmzdobd.ID FROM TabMzdObd WITH(NOLOCK) WHERE TabMzdObd.Mes = (SELECT DATEPART(MONTH,GETDATE())) AND TabMzdObd.Rok = (SELECT DATEPART(YEAR,GETDATE()))))  AND((TabZamMzd.DuvodUkonceniPP=N'02')OR(TabZamMzd.DuvodUkonceniPP=N'13')))  WHERE tpvrA.ID = TabPersVyberRizeni.ID  )
